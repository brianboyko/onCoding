<!DOCTYPE html><html><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><link rel="preload" href="/onCoding/component---src-layouts-index-js-0e6e7990ee8dd50dc3f2.js" as="script"/><link rel="preload" href="/onCoding/component---src-templates-blog-template-js-3c042b543a488014fe7b.js" as="script"/><link rel="preload" href="/onCoding/path---blog-random-redux-thoughts-b093ef55d6a6a9a9f671.js" as="script"/><link rel="preload" href="/onCoding/app-c4f76d6e4cae8f6a822c.js" as="script"/><link rel="preload" href="/onCoding/commons-8dcba3f9452ce054e0e3.js" as="script"/><title data-react-helmet="true">Brian Boyko (On Coding)</title><link data-react-helmet="true" href="https://fonts.googleapis.com/css?family=Fjalla+One|Inconsolata|Sorts+Mill+Goudy" rel="stylesheet"/><meta data-react-helmet="true" name="description" content="Sample"/><meta data-react-helmet="true" name="keywords" content="sample, something"/><style id="gatsby-inlined-css">@import url(https://fonts.googleapis.com/css?family=Fjalla+One|Inconsolata|Roboto|Roboto+Slab);.header__container{background-color:#222;margin-bottom:1.45rem}.header__title{margin:0 auto;max-width:960px;padding:1.45rem 1.0875rem;font-family:Roboto}.header__title__text{color:#fff;text-decoration:none}code[class*=language-],pre[class*=language-]{color:#657b83;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-]::-moz-selection,code[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection{background:#073642}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{background:#073642}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em}:not(pre)>code[class*=language-],pre[class*=language-]{background-color:#fdf6e3}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#93a1a1}.token.punctuation{color:#586e75}.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#268bd2}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string,.token.url{color:#2aa198}.token.entity{color:#657b83;background:#eee8d5}.token.atrule,.token.attr-value,.token.keyword{color:#859900}.token.class-name,.token.function{color:#b58900}.token.important,.token.regex,.token.variable{color:#cb4b16}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.chip{background-color:#4a6fa5;padding:5px 10px;margin:10px 5px;color:#fff;width:auto;border-radius:10px;font-family:Inconsolata,monospace}.chip__container{margin-left:-5px}.blog-post{font-family:Roboto Slab}.blog-post__title{font-family:Fjalla One}.blog-post__date{font-family:Roboto}.blog-post-list{font-family:Roboto}.bio{float:right;width:300px;margin:0 0 20px 40px;padding:20px;background-color:#8cf;font-family:Roboto;font-size:16px}.bio img{width:100px;float:left;padding:3px;border:1px solid #888;margin:0 20px 20px 0}</style></head><body><div id="___gatsby"><div data-reactroot="" data-reactid="1" data-react-checksum="838131717"><!-- react-empty: 2 --><div class="header__container" data-reactid="3"><div class="header__title" data-reactid="4"><h1 style="margin:0;" data-reactid="5"><a class="header__title__text" href="/onCoding/" data-reactid="6">Brian Boyko (On Coding)</a></h1></div></div><div style="margin:0 auto;max-width:960px;padding:0px 1.0875rem 1.45rem;padding-top:0;" data-reactid="7"><div class="blog-post__container" data-reactid="8"><div class="blog-post" data-reactid="9"><div style="background-image:url(/onCoding/static/defaultImage-bf9d9895bd7ec25009144b0f166399c4.jpg);background-size:cover;height:auto;margin-bottom:40px;" data-reactid="10"><div style="color:white;padding:150px 20px 20px 20px;background:rgba(0, 0, 0, 0.3);" data-reactid="11"><h1 class="blog-post__title" data-reactid="12">Random Redux Thoughts</h1><h2 class="blog-post__date" data-reactid="13">30 April, 2016</h2><span class="chip__container" data-reactid="14"><span class="chip" data-reactid="15"><span data-reactid="16">beginning coding</span></span></span></div></div><div class="blog-post-content" data-reactid="17"><p>Maybe I'm not experienced enough to be telling people how they do things is wrong, so I guess I'm not.  I've been just <a href="https://github.com/markerikson/redux-ecosystem-links/blob/master/component-state.md">browsing some of the many, many third-party add-ons for Redux</a>, trying to see if any of them might be good for my workflow.  But as it turns out, I've developed a redux workflow that it's clear that some of these developers didn't share. That's the thing about a new framework - best practices aren't yet established.  </p>
<p>Here's an example: <a href="https://github.com/leeching/redux-brick">Redux Brick</a> basically combines both actions and reducers into a single function, to eliminate some of the boilerplate in writing Redux apps.  This, it does well, but it's main assumption is that, for the most part, every action has a reducer, and vice versa.  (This might have something to do with the fact that most Redux tutorials follow this pattern - in the real world, apps can get much more complex.)</p>
<p>There are a number of instances in my application where multiple actions can trigger the same reducer; and different actions can trigger the same reducer in different ways.  </p>
<p>Here's a good example.</p>
<div class="gatsby-highlight" data-language="jsx">
      <pre class="language-jsx"><code class="language-jsx"><span class="token comment">// actions</span>

<span class="token comment">// hydrate() is used to directly modify components in the store;</span>
<span class="token comment">// if the newState passed into hydrate() has a parameter with the</span>
<span class="token comment">// same name as the reducer, it replaces the old one, otherwise</span>
<span class="token comment">// it defaults to returning state, so partial state changes are possible.</span>
<span class="token comment">// keep in mind, this is not mutating the state - it is an</span>
<span class="token comment">// action just like anything else, and can be reverted.  </span>
<span class="token comment">// I use it to replay user experiences and to have a reliable tutorial</span>
<span class="token comment">// mode that works just like the real thing.</span>

<span class="token keyword">const</span> <span class="token function-variable function">hydrate</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>newState<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    type<span class="token punctuation">:</span> <span class="token constant">HYDRATE</span><span class="token punctuation">,</span>
    newState<span class="token punctuation">:</span> newState<span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
 <span class="token comment">// and others, naturally.</span>

<span class="token comment">// reducers</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">myColor</span><span class="token punctuation">(</span>state <span class="token operator">=</span> <span class="token string">"#000000"</span><span class="token punctuation">,</span> action<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">switch</span><span class="token punctuation">(</span>action<span class="token punctuation">.</span>type<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token constant">CHANGE_COLOR</span><span class="token punctuation">:</span>
      <span class="token keyword">return</span> action<span class="token punctuation">.</span>color<span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token constant">HYDRATE</span><span class="token punctuation">:</span>
      <span class="token keyword">return</span> action<span class="token punctuation">.</span>newState<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">'myColor'</span><span class="token punctuation">)</span> <span class="token operator">?</span>
      action<span class="token punctuation">.</span>newState<span class="token punctuation">.</span>myColor <span class="token punctuation">:</span> state<span class="token punctuation">;</span> <span class="token comment">// could use a failthrough to default, but nah.</span>
    <span class="token keyword">default</span><span class="token punctuation">:</span>
      <span class="token keyword">return</span> state<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">myNumber</span><span class="token punctuation">(</span>state <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> action<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">switch</span><span class="token punctuation">(</span>action<span class="token punctuation">.</span>type<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token constant">ADD_ONE</span><span class="token punctuation">:</span>
      <span class="token keyword">return</span> state<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token constant">DOUBLE</span><span class="token punctuation">:</span>
      <span class="token keyword">return</span> state<span class="token operator">*</span><span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token keyword">case</span> <span class="token constant">ADD_CUSTOM</span><span class="token punctuation">:</span>
      <span class="token keyword">return</span> state <span class="token operator">+</span> action<span class="token punctuation">.</span>numberToAdd
    <span class="token keyword">case</span> <span class="token constant">HYDRATE</span><span class="token punctuation">:</span>
      <span class="token keyword">return</span> action<span class="token punctuation">.</span>newState<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">'myNumber'</span><span class="token punctuation">)</span> <span class="token operator">?</span>
      action<span class="token punctuation">.</span>newState<span class="token punctuation">.</span>myNumber <span class="token punctuation">:</span> state<span class="token punctuation">;</span>
    <span class="token keyword">default</span><span class="token punctuation">:</span>
      <span class="token keyword">return</span> state<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
      </div>
<p>So what's going on here?  Well, for starters, the hydrate() action can affect multiple reducers, and the myNumber() reducer can be affected by multiple actions.  This is not a one-to-one proposition.</p>
<p>Yet despite that, it's really easy to keep track of what's going on here.  Despite the relative complexity, it's simple and relatively easy to read.  </p>
<p>In the app I'm developing for Cycorp, each reducer's switch has a HYDRATE case.  If I want to partially (or completely) replace the entire store, I can do so with HYDRATE.</p>
<p>You may be wondering: Why would you do this?  Well, there are two scenarios.  </p>
<p>The first is the Tutorial Mode of the app I'm building. When the user chooses to go to tutorial mode, a "snapshot" of the state at that moment is made into a backup variable in my store.  I can then step through the tutorial step-by-step by creating an initial, static state from which to begin the tutorial, and either pass through actions or entire states one by one, as the user progresses through the tutorial. At the end, I simply hydrate the store using the backup I created earlier.</p>
<p>A more general use case is anytime you need to stop and save the progress of the user and restore it from that moment.  </p>
<p>The other use case - I have a "replay" mode used in debugging. Our testers simply send us a description of the problem, and it auto-sends us all the actions that lead to that problem.  I simply have the program run through the actions one-by-one, and keep track of an array of states along the entire way.  That way, I end up with an array of every state the state ever experienced, and I can quickly "time-travel" back to any point in the application where the error may have occurred and quickly isolate the buggy action.</p>
<p>Indeed, this way of debugging has allowed us to solve issues in a matter of hours when it would have taken us weeks before, just to find the root cause. I'm getting more than a few "attaboys" from work because of it -- all thanks to NOT following the pattern that Redux-Brick's author thinks Redux follows.</p>
<p>Again, Redux-Brick is brilliant, but it's a completely different workflow and solves a completely different problem than the one I currently have.  I may end up using it, but on a different app entirely, where that approach is the right one to take.</p></div></div></div></div></div></div><script id="webpack-manifest">/*<![CDATA[*/window.webpackManifest={"231608221292675":"app-c4f76d6e4cae8f6a822c.js","122212659448958":"component---src-templates-blog-template-js-3c042b543a488014fe7b.js","162898551421021":"component---src-pages-404-js-4503918ea3a16cfcdb75.js","35783957827783":"component---src-pages-index-js-05222a304816a819be01.js","218538773642512":"component---src-pages-page-2-js-1d4f0f19c1c44398ab65.js","60335399758886":"path----a80995809b8403e73bc5.js","168224806347839":"path---blog-typescript-i-get-it-393f86b95f5fbbf16dba.js","271492005434849":"path---blog-getters-and-setters-antipattern-18b1fe5db119865f09f1.js","184270320657383":"path---blog-private-and-protected-f465c1e73a55aa84c0d5.js","163844919532138":"path---blog-react-before-vue-7d84d820f549bab823e8.js","236448225686559":"path---blog-typescript-i-dont-get-it-f2a2e94ba1fb67c5624d.js","262036473486485":"path---blog-css-in-js-seperate-concerns-4d61a97b495d9014ea41.js","115491676190894":"path---blog-stupid-redux-tricks-6a85f059e0cdba2cd874.js","258654615034557":"path---blog-react-is-just-a-view-9894d9dd8342c7528124.js","49926254253336":"path---blog-currying-thinking-with-portals-fafa7d36257c92497632.js","41763247558397":"path---blog-d-3-in-react-53c5222d557bc67a1a70.js","220485664280490":"path---blog-c-live-dangerously-303ff7241a42df80ea0c.js","92893447782357":"path---blog-coding-on-paper-ed89352d00fe5fc68114.js","31428463216379":"path---blog-the-hip-ae7896d9acf4cd9e06e7.js","21394539151705":"path---blog-interestinglinks-1-39fc1daba0812b9e5a47.js","227515882628393":"path---blog-video-hack-reactor-1-1eaa58564ea41c872c83.js","280364320100666":"path---blog-cool-tools-e7f357ba59a5a24e19ad.js","261444995959908":"path---blog-random-redux-thoughts-b093ef55d6a6a9a9f671.js","16873448567208":"path---blog-redux-mobx-de8eebec133ae7f31479.js","69855552298772":"path---blog-the-other-side-6217a2f560777d96b2d9.js","144584405630298":"path---blog-git-and-subversion-a31508d88818ad1c455d.js","252476015291409":"path---blog-working-with-dynamic-type-3757cff52b99c84ecc1a.js","121292126702233":"path---blog-why-redux-a4fd03760e23debd5366.js","157254306246868":"path---blog-doing-it-right-vs-doing-it-fast-07f456f10bb0ebfbfc9c.js","254022195166212":"path---404-a0e39f21c11f6a62c5ab.js","142629428675168":"path---index-63250777b5c4e2537ece.js","135728916539164":"path---page-2-a0e39f21c11f6a62c5ab.js","178698757827068":"path---404-html-a0e39f21c11f6a62c5ab.js","114276838955818":"component---src-layouts-index-js-0e6e7990ee8dd50dc3f2.js"}/*]]>*/</script><script>/*<![CDATA[*/["/onCoding/commons-8dcba3f9452ce054e0e3.js","/onCoding/app-c4f76d6e4cae8f6a822c.js","/onCoding/path---blog-random-redux-thoughts-b093ef55d6a6a9a9f671.js","/onCoding/component---src-templates-blog-template-js-3c042b543a488014fe7b.js","/onCoding/component---src-layouts-index-js-0e6e7990ee8dd50dc3f2.js"].forEach(function(s){document.write('<script src="'+s+'" defer></'+'script>')})/*]]>*/</script></body></html>